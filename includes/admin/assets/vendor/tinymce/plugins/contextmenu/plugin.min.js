tinymce.PluginManager.add("contextmenu",function(e){var n,t=e.settings.contextmenu_never_use_native,o=function(e){return e.ctrlKey&&!t},c=function(){return tinymce.Env.mac&&tinymce.Env.webkit};e.on("mousedown",function(n){c()&&2===n.button&&!o(n)&&e.selection.isCollapsed()&&e.once("contextmenu",function(n){e.selection.placeCaretAt(n.clientX,n.clientY)})}),e.on("contextmenu",function(t){var c;if(!o(t)){if(t.preventDefault(),c=e.settings.contextmenu||"link image inserttable | cell row column deletetable",n)n.show();else{var i=[];tinymce.each(c.split(/[ ,]/),function(n){var t=e.menuItems[n];"|"==n&&(t={text:n}),t&&(t.shortcut="",i.push(t))});for(var u=0;u<i.length;u++)"|"==i[u].text&&(0!==u&&u!=i.length-1||i.splice(u,1));n=new tinymce.ui.Menu({items:i,context:"contextmenu",classes:"contextmenu"}).renderTo(),e.on("remove",function(){n.remove(),n=null})}var l={x:t.pageX,y:t.pageY};e.inline||(l=tinymce.DOM.getPos(e.getContentAreaContainer()),l.x+=t.clientX,l.y+=t.clientY),n.moveTo(l.x,l.y)}})});